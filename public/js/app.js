(()=>{"use strict";(()=>{function t(t,e){for(var n=0;n<e.length;n++){var a=e[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(t,a.key,a)}}var e=function(){function e(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e)}var n,a;return n=e,(a=[{key:"getDatas",value:function(t){return fetch(t).then((function(t){if(t.ok)return t.json()}))}}])&&t(n.prototype,a),e}();function n(t,e){for(var n=0;n<e.length;n++){var a=e[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(t,a.key,a)}}var a,r=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t)}var e,a;return e=t,(a=[{key:"displayProductFromList",value:function(t){var e=document.createElement("div");e.classList.add("product-list-card");var n=document.createElement("a");n.classList.add("product-list-card__link"),n.setAttribute("href","article.html?id=".concat(t._id)),n.setAttribute("title","".concat(t.name," - Voir la fiche produit"));var a=document.createElement("div");a.classList.add("product-list-card__image-canvas"),a.style.backgroundImage="url(".concat(t.imageUrl,")");var r=document.createElement("span");r.classList.add("product-list-card__price"),r.textContent=this.formatPrice(t.price);var i=document.createElement("div");i.classList.add("product-list-card__info");var c=document.createElement("h3");c.classList.add("product-list-card__name"),c.textContent=t.name;var d=document.createElement("p");return d.classList.add("product-list-card__description"),d.textContent=t.description,e.appendChild(n),n.appendChild(a),n.appendChild(i),a.appendChild(r),i.appendChild(c),i.appendChild(d),e}},{key:"displayOneProduct",value:function(t){var e=document.createElement("div");e.classList.add("product");var n=document.createElement("img");n.classList.add("product__image"),n.setAttribute("src",t.imageUrl),n.setAttribute("alt",t.name);var a=document.createElement("div");a.classList.add("product__info");var r=document.createElement("h3");r.classList.add("product__title"),r.textContent=t.name;var i=document.createElement("p");i.classList.add("product_description"),i.textContent=t.description;var c=document.createElement("p");c.classList.add("product__price"),c.textContent=this.formatPrice(t.price);var d=document.createElement("form");d.setAttribute("method","POST"),d.id="addToCartForm";var o=document.createElement("input");o.setAttribute("type","hidden"),o.setAttribute("name","id"),o.setAttribute("value",t._id),o.id="id";var u=document.createElement("div"),l=document.createElement("div"),s=document.createElement("label");s.setAttribute("for","option-selector"),s.textContent="Couleur";var p=document.createElement("select");p.setAttribute("name","option"),p.id="option-selector",t.colors.map((function(t){var e=document.createElement("option");e.setAttribute("value",t),e.textContent=t,p.appendChild(e)}));var m=document.createElement("label");m.setAttribute("for","quantity"),m.textContent="Quantité";var v=document.createElement("input");v.setAttribute("type","number"),v.setAttribute("name","quantity"),v.setAttribute("min","1"),v.setAttribute("max","10"),v.setAttribute("value","1"),v.id="quantity";var h=document.createElement("button");return h.classList.add("btn"),h.classList.add("btn--primary"),h.setAttribute("type","submit"),h.textContent="Ajouter au panier",e.appendChild(n),e.appendChild(a),a.appendChild(r),a.appendChild(i),a.appendChild(c),a.appendChild(d),d.appendChild(o),d.appendChild(u),d.appendChild(l),d.appendChild(h),u.appendChild(s),u.appendChild(p),l.appendChild(m),l.appendChild(v),e}},{key:"formatPrice",value:function(t){return"".concat((t/100).toString()," €")}}])&&n(e.prototype,a),t}();function i(t,e,n,a,r,i,c){try{var d=t[i](c),o=d.value}catch(t){return void n(t)}d.done?e(o):Promise.resolve(o).then(a,r)}function c(t){if("article.html"===o()){var e=new URLSearchParams(window.location.search);if(e.has("id")&&""!==e.get("id"))return"".concat(t,"/").concat(e.get("id"));window.location="/public/index.html"}return t}function d(t){switch(console.log(o()),o()){case"article.html":var e=(new r).displayOneProduct(t);document.getElementById("product-section").appendChild(e);break;default:t.map((function(t){var e=(new r).displayProductFromList(t);document.getElementById("product-list").appendChild(e)}))}}function o(){return window.location.pathname.split("/").pop()}(a=regeneratorRuntime.mark((function t(){var n;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=new e,t.next=3,n.getDatas(c("http://macbook.local:3000/api/teddies")).then((function(t){d(t)})).catch((function(t){alert("Il y a eu une erreur !\n".concat(t))}));case 3:case"end":return t.stop()}}),t)})),function(){var t=this,e=arguments;return new Promise((function(n,r){var c=a.apply(t,e);function d(t){i(c,n,r,d,o,"next",t)}function o(t){i(c,n,r,d,o,"throw",t)}d(void 0)}))})()})()})();